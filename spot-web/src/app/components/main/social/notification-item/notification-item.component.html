<div class="notification-item">
  <div
    class="content"
    (click)="goToPost($event)"
    [ngClass]="{ seen: !notification.seen }"
  >
    <div #notificationImage class="image-preview" *ngIf="userMetadata">
      <div
        class="preview-content"
        *ngIf="notification.replyImageSrc; else noImageReply"
      >
        <img
          [src]="notification.replyImageSrc"
          [ngClass]="{
            'image-blur': imageBlurred && userMetadata.matureFilter
          }"
        />
        <div
          [hidden]="!(imageBlurred && userMetadata.matureFilter)"
          class="image-blur-text"
        >
          <span class="material-icons icon"> error_outline </span>
        </div>
      </div>
      <ng-template #noImageReply>
        <div
          class="preview-content"
          *ngIf="notification.commentImageSrc; else noImageComment"
        >
          <img
            [src]="notification.commentImageSrc"
            [ngClass]="{
              'image-blur': imageBlurred && userMetadata.matureFilter
            }"
          />
          <div
            [hidden]="!(imageBlurred && userMetadata.matureFilter)"
            class="image-blur-text"
          >
            <span class="material-icons icon"> error_outline </span>
          </div>
        </div>
        <ng-template #noImageComment>
          <div
            class="preview-content"
            *ngIf="notification.imageSrc; else noImage"
          >
            <img
              [src]="notification.imageSrc"
              [ngClass]="{
                'image-blur': imageBlurred && userMetadata.matureFilter
              }"
            />
            <div
              [hidden]="!(imageBlurred && userMetadata.matureFilter)"
              class="image-blur-text"
            >
              <span class="material-icons icon"> error_outline </span>
            </div>
          </div>
          <ng-template #noImage>
            <span class="no-image-preview">
              {{ getImagePreview(notification) }}
            </span>
          </ng-template>
        </ng-template>
      </ng-template>
    </div>

    <div class="text-preview">
      <div class="prompt">
        <div *ngIf="notification.commentId; else postLink">
          <div *ngIf="notification.commentParentid; else commentLink">
            <span class="username"> {{ notification.username }} </span>
            <span> {{ 'MAIN.NOTIFICATION_ITEM.REPLY_PROMPT' | translate }} </span>
            <div class="text">{{ notification.replyContent }}</div>
          </div>
          <ng-template #commentLink>
            <span class="username"> {{ notification.username }} </span>
            <span> {{ 'MAIN.NOTIFICATION_ITEM.COMMENT_PROMPT' | translate }} </span>
            <div class="text">{{ notification.commentContent }}</div>
          </ng-template>
        </div>
        <ng-template #postLink>
          <span class="username"> {{ notification.username }} </span>
          <span> {{ 'MAIN.NOTIFICATION_ITEM.PROMPT' | translate }} </span>
          <div class="text">{{ notification.content }}</div>
        </ng-template>
      </div>
    </div>

    <div class="date">{{ time }}</div>
  </div>
  <span class="material-icons delete" (click)="delete()"> close </span>
</div>
