<meta charset="UTF-8">
<div class="create">

  <div class="editor">
      <div contenteditable="true" attr.ph="{{STRINGS.CREATE_PLACEHOLDER}}" class="content" (input)="onTextInput($event.target.innerHTML)"></div>
      <div class="image" *ngIf="imgSrc != null">
        <img [src]="domSanitizer.bypassSecurityTrustUrl(imgSrc)" />
      </div>
  </div>

  <div *ngIf="createError$ | async as createError; else clientError" class="createError">
    {{ createError.message }}
  </div>
  <ng-template #clientError>
    <span *ngIf="createError" class="createError">
      {{ createError }}
    </span>
  </ng-template>

  <div class="option-bar">
    <div class="file-options" *ngIf="imgSrc != null">
      <span class="file-title"> {{ STRINGS.FILE_TITLE }} </span>
      <span class="file-name"> {{ imageFile.name }} </span>
      <span class="file-remove" (click)="removeFile()">
        <i class="material-icons"> delete </i>
      </span>
    </div>
    <input style="display: none" type="file" (change)="onFileChanged($event)" #fileInput>
    <span class="counter" [ngClass]="{'counter-error': invalidLength() }"> {{ POSTS_CONSTANTS.MAX_CONTENT_LENGTH - currentLength }} </span>
    <i class="material-icons photo" (click)="fileInput.click()"> insert_photo </i>
    <span class="submit" (click)="submit()"> {{ STRINGS.SUBMIT }} </span>
  </div>

</div>
