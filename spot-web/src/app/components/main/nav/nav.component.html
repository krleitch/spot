<div class="nav">
  <div (click)="navigateHome()" class="title-link">
    <div class="title-image"></div>
  </div>
  <div *ngIf="user$ | async as myuser; else noUser" class="features">
    <div *ngIf="userMetadata$ | async as userMetadata" class="score">
      <i class="material-icons hot"> whatshot </i>
      <span> {{ userMetadata.score }} </span>
    </div>
    <div class="notifications" #notifications>
      <i class="material-icons" (click)="toggleNotifications()">
        notifications_none
      </i>
      <div
        *ngIf="unreadNotifications !== '0'"
        class="unread"
        (click)="toggleNotifications()"
      >
        {{ unreadNotifications }}
      </div>
      <spot-notifications *ngIf="showNotifications"></spot-notifications>
    </div>
    <div #user class="user" (click)="userSetDropdown(true)">
      <i class="material-icons icon"> person_outline </i>
      <span class="username"> {{ myuser.username }} </span>
      <div class="dropdown-content" [ngClass]="{ show: userShowDropdown }">
        <a class="button" [routerLink]="'/activity'">
          <span class="material-icons icon"> show_chart </span>
          {{ 'MAIN.NAV.ACTIVITY' | translate }}
        </a>
        <a class="button" [routerLink]="'/friends'">
          <span class="material-icons icon"> people_alt </span>
          {{ 'MAIN.NAV.FRIENDS' | translate }}
        </a>
        <a class="button" [routerLink]="'/account'">
          <span class="material-icons icon"> settings </span>
          {{ 'MAIN.NAV.ACCOUNT' | translate }}
        </a>
        <div class="button" (click)="logout()">
          <span class="material-icons icon"> directions_run </span>
          {{ 'MAIN.NAV.LOGOUT' | translate }}
        </div>
      </div>
    </div>
  </div>
  <ng-template #noUser>
    <div *ngIf="!loading || (showUserIndicator$ | async)">
      <div class="login" (click)="openAuthModal()">
        {{ 'MAIN.NAV.LOGIN_REGISTER' | translate }}
      </div>
    </div>
  </ng-template>
</div>
