<div class="upload-photo">
  <div class="header">
    <span class="title">Upload a photo</span>
    <i class="material-icons photo" (click)="close()"> close </i>
  </div>
  <div class="body">
    <div class="description">
      <span> A profile picture helps others recgonize you. </span>
      <span>
        Your picture will only be shown to the specefic users you tag in
        comments and chats.
      </span>
      <span> You will always be anonymous to all other users. </span>
    </div>

    <div *ngIf="croppedImage" class="preview-header">
      <span> Crop your photo </span>
      <span class="scale-container">
        <button (click)="scaleUp()">
          <i class="material-icons"> add </i>
        </button>
        <button (click)="scaleDown()">
          <i class="material-icons"> remove </i>
        </button>
        <button (click)="reset()">
          <i class="material-icons"> restart_alt </i>
        </button>
      </span>
    </div>

    <div #cropper>
      <image-cropper
        [imageChangedEvent]="imageChangedEvent"
        [maintainAspectRatio]="true"
        [aspectRatio]="1 / 1"
        [cropperStaticWidth]="100"
        [cropperStaticHeight]="100"
        [roundCropper]="true"
        [transform]="transform"
        format="png"
        (imageCropped)="imageCropped($event)"
        (imageLoaded)="imageLoaded($event)"
        (cropperReady)="cropperReady()"
        (loadImageFailed)="loadImageFailed()"
      ></image-cropper>
    </div>

    <div class="preview-container">
      <div class="button-container">
        <input
          style="display: none"
          type="file"
          (change)="fileChangeEvent($event)"
          #fileInput
        />
        <button class="upload" (click)="fileInput.click()">
          <span *ngIf="!croppedImage" class="text"> Upload from computer </span>
          <span *ngIf="croppedImage" class="text"> Choose another photo </span>
          <i class="material-icons photo"> upload </i>
        </button>
        <div class="response-container">
          <button class="confirm" (click)="confirm()">
            <span class="text"> Confirm </span>
          </button>
          <button class="remove" (click)="showConfirmRemove()">
            <span class="text"> Remove </span>
          </button>
        </div>
      </div>
      <div class="preview">
        <img
          *ngIf="croppedImage || data.profilePictureSrc"
          [src]="croppedImage || data.profilePictureSrc"
        />
        <img
          class="default"
          *ngIf="!croppedImage && !data.profilePictureSrc"
          src="../../../../assets/images/op_large.png"
        />
      </div>
    </div>

    <div class="confirm-remove" *ngIf="confirmRemove">
      <span class="text">
        Are you sure you would like to permanently delete your profile
        picture</span
      >
      <button class="remove" (click)="remove()">
        Delete
      </button>
    </div>
  </div>
</div>
